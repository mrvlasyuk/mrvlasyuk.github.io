(function(){"use strict";var e={1951:function(e,t,n){var l=n(9242),r=n(3396);function a(e,t,n,l,a,o){const s=(0,r.up)("ChessPuzzle");return(0,r.wg)(),(0,r.j4)(s)}n(560);var o=n(4870),s=n(7139),i=n(6),u=n(1441);const c={class:"puzzle-container flex flex-col items-center"},g=(0,r._)("h1",{class:"text-3xl font-extrabold mb-2"},"Cognitive Score: Chess Metric",-1),v={class:"my_chessboard w-full relative"},h=(0,r._)("div",{class:"play-button"},null,-1),d=[h],p={class:"puzzle-top"},f={class:"puzzle-rating"},m=(0,r._)("span",{class:"puzzle-rating-label"},"Puzzle rating:",-1),y={class:"puzzle-rating-value"},_=(0,r._)("g",{class:"pause-button"},[(0,r._)("rect",{y:"22",x:"20",width:"20",height:"4",fill:"green"}),(0,r._)("rect",{y:"34",x:"20",width:"20",height:"4",fill:"green"})],-1),w={class:"info_block my-10"},z={class:"user-rating"},b=(0,r._)("span",{class:"user-rating-label"},"My rating:",-1),k={class:"user-rating-value"},S={class:"user-rating-deviation"},x={key:0,class:"history m-b-5"},M=(0,r._)("h1",{class:"text-xl font-extrabold"},"History",-1),D={class:"history-table"},O=["onUpdate:modelValue"],C=["onClick"],P={class:"explanation info_block my-10"},H={class:"text-xl font-extrabold mb-2"},T={key:0},j={key:1},I={key:0},R=(0,r.uE)('<p> The Chess Puzzle page is designed to measure and track cognitive sharpness and brain energy through the challenge of solving chess puzzles. It is a tool for users to assess their mental acuity at different times of the day. </p><h2 class="text-xl font-extrabold my-2">Rules and Features</h2><ul><li><strong>Chess Puzzle Solving:</strong> Solve chess puzzles within a set time limit to test your cognitive skills. </li><li><strong>Rating System:</strong> Each puzzle has a difficulty rating, and users have their own ratings that adjust based on performance. </li><li><strong>Timer:</strong> A countdown timer adds urgency to the puzzle-solving experience. </li><li><strong>User Performance Tracking:</strong> Track your rating changes and rating deviation to monitor your progress over time. </li><li><strong>History:</strong> A historical record of your ratings is maintained to help you see trends in your performance. </li><li><strong>Adaptive Difficulty:</strong> Puzzles are matched to your rating level to provide a consistent challenge. </li><li><strong>Local Storage:</strong> Your rating history is stored locally to maintain progress across sessions. </li><li><strong>Glicko-2 Rating System:</strong> The user&#39;s rating is updated using the Glicko-2 system, reflecting changes in skill level after each puzzle. </li></ul>',3),U=[R],$={key:0,class:"checkmark-emoji"},q=(0,r._)("div",{class:"made-by mb-2"},[(0,r._)("a",{href:"https://t.me/lovesyuk"},"Made by lovesyuk 💜")],-1),N="https://chess.pomodorr.io/get_puzzle",E=26;var J={__name:"ChessPuzzle",setup(e){const t=(0,o.iH)(null),n=(0,o.iH)([]),a=(0,o.iH)(!1),h={},R=(0,o.iH)(!0),J=(0,o.iH)(!1),A=(0,o.iH)(10);let F=null,G=null,Y=[],B="w",L=(0,o.iH)(null),V=(0,o.iH)(null),K=[],W=(0,o.iH)(null),Z=null;const Q=(e,t)=>{G.setPosition(e);const n=e.split(" ")[1];B="w"===n?"b":"w",Y=t.split(" ");let l=G.board.state.orientation;l="white"===l?"w":"b",B!==l&&G.toggleOrientation()},X=async()=>{try{const e=await fetch(`${N}?rating=${L.value}`),n=await e.json();t.value=n,Q(n.FEN,n.Moves),setTimeout((()=>{null!==G&&G.move(Y[0])}),300),ne()}catch(e){console.error("Error fetching puzzle:",e)}},ee=2*Math.PI*E,te=()=>{A.value=10,F=setInterval((()=>{if(!J.value&&A.value>0){A.value-=.1;const e=document.querySelector(".progress-ring__circle");if(e){const t=ee-A.value/10*ee;e.style.strokeDashoffset=t.toString(),e.style.strokeDasharray=ee.toString()}}A.value<=0&&(clearInterval(F),oe(!1),X())}),100)},ne=()=>{clearInterval(F),te()},le=()=>{J.value=!J.value},re=e=>{G=e},ae=e=>{if(G.game.turn()===B)return;let t=G.game.history().length-1;if(e.lan===Y[t]){if(console.log("correct move"),t+1>=Y.length)return console.log("Success!"),pe(),oe(!0),void X();setTimeout((()=>{G.move(Y[t+1])}),300),ne()}else console.log("wrong move"),setTimeout((()=>{G.undoLastMove()}),300),oe(!1),X()},oe=e=>{let n=Z.makePlayer(L.value,V.value);const l=e?1:0;let r=Z.makePlayer(t.value.Rating,t.value.RatingDeviation),a=[[n,r,l]];Z.updateRatings(a),L.value=Math.round(n.getRating()),V.value=Math.round(n.getRd()),ue(),K.push(L.value),se()},se=()=>{let e=Math.floor(.1*K.length);e=Math.max(e,K.length-50);let t=K.slice(e),n=t.reduce(((e,t)=>e+t),0)/t.length,l=t.reduce(((e,t)=>e+Math.pow(t-n,2)),0),r=Math.sqrt(l/t.length);W.value=Math.round(r+200/(t.length+1))};(0,r.bv)((()=>{de(),ie(),X()}));const ie=()=>{let e=.06;Z=new u.Glicko2({tau:.5,rating:1500,rd:200,vol:e});const t=JSON.parse(localStorage.getItem("history"))||[];if(t.length>0){const e=t[t.length-1];L.value=e.rating,V.value=Math.min(2*e.deviation,200),V.value=Math.max(V.value,50)}else L.value=500,V.value=200;W.value=V.value,K.push(L.value)},ue=()=>{const e=300,t={rating:Math.round(L.value),deviation:Math.round(W.value),time:Math.round(Date.now()/1e3)};let n=JSON.parse(localStorage.getItem("history"))||[];0===n.length||t.time-n[n.length-1].time>e?n.push(t):n[n.length-1]=t,localStorage.setItem("history",JSON.stringify(n)),de()},ce=e=>{const t=new Date(1e3*e),n=t.getFullYear(),l=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0"),a=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0");return`${n}-${l}-${r} ${a}:${o}`},ge=()=>{localStorage.setItem("history",JSON.stringify(n.value.reverse())),de()},ve=()=>{ge()},he=e=>{n.value.splice(e,1),ge()},de=()=>{let e=JSON.parse(localStorage.getItem("history"))||[];n.value=e.sort(((e,t)=>t.time-e.time))},pe=()=>{a.value=!0,setTimeout((()=>{a.value=!1}),1e3)};return(e,u)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",c,[g,(0,r._)("div",v,[(0,r.Wm)((0,o.SU)(i.o),{class:"chessboard","board-config":h,onBoardCreated:re,onMove:ae}),J.value?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"overlay",onClick:le},d)):(0,r.kq)("",!0)]),(0,r._)("div",p,[(0,r._)("div",f,[m,(0,r._)("span",y,(0,s.zw)(t.value?.Rating),1)]),((0,r.wg)(),(0,r.iD)("svg",{class:"progress-ring",width:"60",height:"60",style:{cursor:"pointer"},onClick:le},[(0,r._)("circle",{class:"progress-ring__circle",stroke:"green","stroke-width":"4",fill:"transparent",r:E,cx:"30",cy:"30"}),_]))]),(0,r._)("div",w,[(0,r._)("div",z,[b,(0,r._)("span",k,(0,s.zw)((0,o.SU)(L)),1),(0,r._)("span",S,"±"+(0,s.zw)((0,o.SU)(W)),1)]),n.value.length>0?((0,r.wg)(),(0,r.iD)("div",x,[M,(0,r._)("table",D,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.value,((e,t)=>((0,r.wg)(),(0,r.iD)("tr",{key:e.time},[(0,r._)("td",null,(0,s.zw)(ce(e.time)),1),(0,r._)("td",null,(0,s.zw)(e.rating),1),(0,r._)("td",null,"±"+(0,s.zw)(e.deviation),1),(0,r._)("td",null,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t=>e.comment=t,onBlur:u[0]||(u[0]=e=>ve()),placeholder:"✏️"},null,40,O),[[l.nr,e.comment]])]),(0,r._)("td",null,[(0,r._)("button",{onClick:e=>he(t)},"✖",8,C)])])))),128))])])):(0,r.kq)("",!0)]),(0,r._)("div",P,[(0,r._)("div",{class:"explanation-block",onClick:u[1]||(u[1]=e=>R.value=!R.value)},[(0,r._)("h1",H,[(0,r.Uk)(" Goal of the Chess Puzzle Page "),R.value?((0,r.wg)(),(0,r.iD)("span",T,"▼")):((0,r.wg)(),(0,r.iD)("span",j,"▲"))]),R.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",I,U))])]),a.value?((0,r.wg)(),(0,r.iD)("div",$,"✔")):(0,r.kq)("",!0)]),q],64))}};const A=J;var F=A,G={name:"App",components:{ChessPuzzle:F}},Y=n(89);const B=(0,Y.Z)(G,[["render",a]]);var L=B;(0,l.ri)(L).mount("#app")}},t={};function n(l){var r=t[l];if(void 0!==r)return r.exports;var a=t[l]={exports:{}};return e[l].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,l,r,a){if(!l){var o=1/0;for(c=0;c<e.length;c++){l=e[c][0],r=e[c][1],a=e[c][2];for(var s=!0,i=0;i<l.length;i++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](l[i])}))?l.splice(i--,1):(s=!1,a<o&&(o=a));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[l,r,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var r,a,o=l[0],s=l[1],i=l[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(i)var c=i(n)}for(t&&t(l);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},l=self["webpackChunkbrain_chess_scorer"]=self["webpackChunkbrain_chess_scorer"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[998],(function(){return n(1951)}));l=n.O(l)})();
//# sourceMappingURL=app.84d7a27c.js.map