(function(){"use strict";var e={9943:function(e,t,n){var r=n(9242),a=n(3396);function l(e,t,n,r,l,o){const s=(0,a.up)("ChessPuzzle");return(0,a.wg)(),(0,a.j4)(s)}n(560);var o=n(4870),s=n(7139),i=n(6),u=n(1441);const c={class:"puzzle-container flex flex-col items-center"},g=(0,a._)("h1",{class:"text-3xl font-extrabold mb-2"},"Cognitive Score: Chess Metric",-1),h={class:"puzzle-top"},v={class:"puzzle-rating"},d=(0,a._)("span",{class:"puzzle-rating-label"},"Puzzle rating:",-1),p={class:"puzzle-rating-value"},f={class:"info_block my-10"},m={class:"user-rating"},y=(0,a._)("span",{class:"user-rating-label"},"My rating:",-1),z={class:"user-rating-value"},_={class:"user-rating-deviation"},b={key:0,class:"history m-b-5"},w=(0,a._)("h1",{class:"text-xl font-extrabold"},"History",-1),k={class:"history-table"},S=["onUpdate:modelValue"],x=["onClick"],M={class:"explanation info_block my-10"},O={class:"text-xl font-extrabold mb-2"},P={key:0},D={key:1},C={key:0},H=(0,a.uE)('<p> The Chess Puzzle page is designed to measure and track cognitive sharpness and brain energy through the challenge of solving chess puzzles. It is a tool for users to assess their mental acuity at different times of the day. </p><h2 class="text-xl font-extrabold my-2">Rules and Features</h2><ul><li><strong>Chess Puzzle Solving:</strong> Solve chess puzzles within a set time limit to test your cognitive skills. </li><li><strong>Rating System:</strong> Each puzzle has a difficulty rating, and users have their own ratings that adjust based on performance. </li><li><strong>Timer:</strong> A countdown timer adds urgency to the puzzle-solving experience. </li><li><strong>User Performance Tracking:</strong> Track your rating changes and rating deviation to monitor your progress over time. </li><li><strong>History:</strong> A historical record of your ratings is maintained to help you see trends in your performance. </li><li><strong>Adaptive Difficulty:</strong> Puzzles are matched to your rating level to provide a consistent challenge. </li><li><strong>Local Storage:</strong> Your rating history is stored locally to maintain progress across sessions. </li><li><strong>Glicko-2 Rating System:</strong> The user&#39;s rating is updated using the Glicko-2 system, reflecting changes in skill level after each puzzle. </li></ul>',3),T=[H],j={key:0,class:"checkmark-emoji"},I=(0,a._)("div",{class:"made-by mb-2"},[(0,a._)("a",{href:"https://t.me/lovesyuk"},"Made by lovesyuk 💜")],-1),R="https://chess.pomodorr.io/get_puzzle",U=26;var $={__name:"ChessPuzzle",setup(e){const t=(0,o.iH)(null),n=(0,o.iH)([]),l=(0,o.iH)(!1),H={},$=(0,o.iH)(!0),N=(0,o.iH)(10);let q=null,E=!1,J=null,A=[],F="w",G=(0,o.iH)(null),Y=(0,o.iH)(null),B=[],L=(0,o.iH)(null),V=null;const K=(e,t)=>{J.setPosition(e);const n=e.split(" ")[1];F="w"===n?"b":"w",A=t.split(" ");let r=J.board.state.orientation;r="white"===r?"w":"b",F!==r&&J.toggleOrientation()},W=async()=>{try{const e=await fetch(`${R}?rating=${G.value}`),n=await e.json();t.value=n,K(n.FEN,n.Moves),setTimeout((()=>{null!==J&&J.move(A[0])}),300),X()}catch(e){console.error("Error fetching puzzle:",e)}},Z=2*Math.PI*U,Q=()=>{N.value=10,q=setInterval((()=>{if(N.value>0){N.value-=.1;const e=document.querySelector(".progress-ring__circle");if(e){const t=Z-N.value/10*Z;e.style.strokeDashoffset=t.toString(),e.style.strokeDasharray=Z.toString()}}else clearInterval(q),E&&ne(!1),W()}),100)},X=()=>{clearInterval(q),Q()},ee=e=>{J=e},te=e=>{if(J.game.turn()===F)return;let t=J.game.history().length-1;if(e.lan===A[t]){if(console.log("correct move"),t+1>=A.length)return console.log("Success!"),ge(),ne(!0),void W();setTimeout((()=>{J.move(A[t+1])}),300),X()}else console.log("wrong move"),setTimeout((()=>{J.undoLastMove()}),300),ne(!1),W()},ne=e=>{let n=V.makePlayer(G.value,Y.value);const r=e?1:0;let a=V.makePlayer(t.value.Rating,t.value.RatingDeviation),l=[[n,a,r]];V.updateRatings(l),G.value=Math.round(n.getRating()),Y.value=Math.round(n.getRd()),le(),E=e,B.push(G.value),re()},re=()=>{let e=Math.floor(.1*B.length);e=Math.max(e,B.length-50);let t=B.slice(e),n=t.reduce(((e,t)=>e+t),0)/t.length,r=t.reduce(((e,t)=>e+Math.pow(t-n,2)),0),a=Math.sqrt(r/t.length);L.value=Math.round(a+200/(t.length+1))};(0,a.bv)((()=>{ce(),ae(),W()}));const ae=()=>{let e=.06;V=new u.Glicko2({tau:.5,rating:1500,rd:200,vol:e});const t=JSON.parse(localStorage.getItem("history"))||[];if(t.length>0){const e=t[t.length-1];G.value=e.rating,Y.value=Math.min(2*e.deviation,200),Y.value=Math.max(Y.value,50)}else G.value=500,Y.value=200;L.value=Y.value,B.push(G.value)},le=()=>{const e=300,t={rating:Math.round(G.value),deviation:Math.round(L.value),time:Math.round(Date.now()/1e3)};let n=JSON.parse(localStorage.getItem("history"))||[];0===n.length||t.time-n[n.length-1].time>e?n.push(t):n[n.length-1]=t,localStorage.setItem("history",JSON.stringify(n)),ce()},oe=e=>{const t=new Date(1e3*e),n=t.getFullYear(),r=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0"),l=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0");return`${n}-${r}-${a} ${l}:${o}`},se=()=>{localStorage.setItem("history",JSON.stringify(n.value.reverse())),ce()},ie=()=>{se()},ue=e=>{n.value.splice(e,1),se()},ce=()=>{let e=JSON.parse(localStorage.getItem("history"))||[];n.value=e.sort(((e,t)=>t.time-e.time))},ge=()=>{l.value=!0,setTimeout((()=>{l.value=!1}),1e3)};return(e,u)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",c,[g,(0,a.Wm)((0,o.SU)(i.o),{class:"chessboard","board-config":H,onBoardCreated:ee,onMove:te}),(0,a._)("div",h,[(0,a._)("div",v,[d,(0,a._)("span",p,(0,s.zw)(t.value?.Rating),1)]),(0,a._)("svg",{class:"progress-ring",width:"60",height:"60"},[(0,a._)("circle",{class:"progress-ring__circle",stroke:"green","stroke-width":"4",fill:"transparent",r:U,cx:"30",cy:"30"})])]),(0,a._)("div",f,[(0,a._)("div",m,[y,(0,a._)("span",z,(0,s.zw)((0,o.SU)(G)),1),(0,a._)("span",_,"±"+(0,s.zw)((0,o.SU)(L)),1)]),n.value.length>0?((0,a.wg)(),(0,a.iD)("div",b,[w,(0,a._)("table",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.value,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:e.time},[(0,a._)("td",null,(0,s.zw)(oe(e.time)),1),(0,a._)("td",null,(0,s.zw)(e.rating),1),(0,a._)("td",null,"±"+(0,s.zw)(e.deviation),1),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t=>e.comment=t,onBlur:u[0]||(u[0]=e=>ie()),placeholder:"✏️"},null,40,S),[[r.nr,e.comment]])]),(0,a._)("td",null,[(0,a._)("button",{onClick:e=>ue(t)},"✖",8,x)])])))),128))])])):(0,a.kq)("",!0)]),(0,a._)("div",M,[(0,a._)("div",{class:"explanation-block",onClick:u[1]||(u[1]=e=>$.value=!$.value)},[(0,a._)("h1",O,[(0,a.Uk)(" Goal of the Chess Puzzle Page "),$.value?((0,a.wg)(),(0,a.iD)("span",P,"▼")):((0,a.wg)(),(0,a.iD)("span",D,"▲"))]),$.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",C,T))])]),l.value?((0,a.wg)(),(0,a.iD)("div",j,"✔")):(0,a.kq)("",!0)]),I],64))}};const N=$;var q=N,E={name:"App",components:{ChessPuzzle:q}},J=n(89);const A=(0,J.Z)(E,[["render",l]]);var F=A;(0,r.ri)(F).mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,l){if(!r){var o=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],l=e[c][2];for(var s=!0,i=0;i<r.length;i++)(!1&l||o>=l)&&Object.keys(n.O).every((function(e){return n.O[e](r[i])}))?r.splice(i--,1):(s=!1,l<o&&(o=l));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[r,a,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,l,o=r[0],s=r[1],i=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(i)var c=i(n)}for(t&&t(r);u<o.length;u++)l=o[u],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(c)},r=self["webpackChunkbrain_chess_scorer"]=self["webpackChunkbrain_chess_scorer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(9943)}));r=n.O(r)})();
//# sourceMappingURL=app.57c089a8.js.map