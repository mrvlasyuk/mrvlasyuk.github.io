(function(){"use strict";var e={6668:function(e,t,n){var r=n(9242),o=n(3396);function s(e,t,n,r,s,a){const i=(0,o.up)("ChessPuzzle");return(0,o.wg)(),(0,o.j4)(i)}n(560);var a=n(4870),i=n(7139),l=n(6),u=n(1441);const c={class:"puzzle-container flex flex-col items-center"},g=(0,o._)("h1",{class:"text-3xl font-extrabold mb-2"},"Cognitive Score: Chess Metric",-1),v={class:"puzzle-top"},h={class:"puzzle-rating"},d=(0,o._)("span",{class:"puzzle-rating-label"},"Puzzle rating:",-1),f={class:"puzzle-rating-value"},p={class:"info_block my-10"},m={class:"user-rating"},y=(0,o._)("span",{class:"user-rating-label"},"My rating:",-1),z={class:"user-rating-value"},b={class:"user-rating-deviation"},_={key:0,class:"history m-b-5"},k=(0,o._)("h1",{class:"text-xl font-extrabold"},"History",-1),w={class:"history-table"},S=["onClick"],x={class:"explanation info_block my-10"},O={class:"text-xl font-extrabold mb-2"},P={key:0},D={key:1},M={key:0},C=(0,o.uE)('<p> The Chess Puzzle page is designed to measure and track cognitive sharpness and brain energy through the challenge of solving chess puzzles. It is a tool for users to assess their mental acuity at different times of the day. </p><h2 class="text-xl font-extrabold my-2">Rules and Features</h2><ul><li><strong>Chess Puzzle Solving:</strong> Solve chess puzzles within a set time limit to test your cognitive skills. </li><li><strong>Rating System:</strong> Each puzzle has a difficulty rating, and users have their own ratings that adjust based on performance. </li><li><strong>Timer:</strong> A countdown timer adds urgency to the puzzle-solving experience. </li><li><strong>User Performance Tracking:</strong> Track your rating changes and rating deviation to monitor your progress over time. </li><li><strong>History:</strong> A historical record of your ratings is maintained to help you see trends in your performance. </li><li><strong>Adaptive Difficulty:</strong> Puzzles are matched to your rating level to provide a consistent challenge. </li><li><strong>Local Storage:</strong> Your rating history is stored locally to maintain progress across sessions. </li><li><strong>Glicko-2 Rating System:</strong> The user&#39;s rating is updated using the Glicko-2 system, reflecting changes in skill level after each puzzle. </li></ul>',3),H=[C],R={key:0,class:"checkmark-emoji"},T=(0,o._)("div",{class:"made-by mb-2"},[(0,o._)("a",{href:"https://t.me/lovesyuk"},"Made by lovesyuk ðŸ’œ")],-1),j="https://chess.pomodorr.io/get_puzzle",I=26;var $={__name:"ChessPuzzle",setup(e){const t=(0,a.iH)(null),n=(0,a.iH)([]),r=(0,a.iH)(!1),s={},C=(0,a.iH)(!0),$=(0,a.iH)(10);let N=null,E=!1,J=null,U=[],q="w",A=(0,a.iH)(null),F=(0,a.iH)(null),G=null,Y=null;const L=(e,t)=>{J.setPosition(e);const n=e.split(" ")[1];q="w"===n?"b":"w",U=t.split(" ");let r=J.board.state.orientation;r="white"===r?"w":"b",q!==r&&J.toggleOrientation()},B=async()=>{try{const e=await fetch(`${j}?rating=${A.value}`),n=await e.json();t.value=n,L(n.FEN,n.Moves),setTimeout((()=>{null!==J&&J.move(U[0])}),300),Z()}catch(e){console.error("Error fetching puzzle:",e)}},K=2*Math.PI*I,W=()=>{$.value=10,N=setInterval((()=>{if($.value>0){$.value-=.1;const e=document.querySelector(".progress-ring__circle");if(e){const t=K-$.value/10*K;e.style.strokeDashoffset=t.toString(),e.style.strokeDasharray=K.toString()}}else clearInterval(N),E&&X(!1),B()}),100)},Z=()=>{clearInterval(N),W()},Q=e=>{J=e,B()},V=e=>{if(J.game.turn()===q)return;let t=J.game.history().length-1;if(e.lan===U[t]){if(console.log("correct move"),t+1>=U.length)return console.log("Success!"),se(),X(!0),void B();setTimeout((()=>{J.move(U[t+1])}),300),Z()}else console.log("wrong move"),setTimeout((()=>{J.undoLastMove()}),300),X(!1),B()},X=e=>{const n=G.makePlayer(t.value.Rating,t.value.RatingDeviation),r=e?1:0;G.updateRatings([[Y,n,r]]),A.value=Math.round(Y.getRating()),F.value=Math.round(Y.getRd()),te(),E=e};(0,o.bv)((()=>{oe(),ee(),B()}));const ee=()=>{let e=.06;G=new u.Glicko2({tau:.5,rating:1500,rd:200,vol:e});const t=JSON.parse(localStorage.getItem("history"))||[];if(t.length>0){const e=t[t.length-1];A.value=e.rating,F.value=200}else A.value=500,F.value=1e3;Y=G.makePlayer(A.value,F.value,e)},te=()=>{const e=300,t={rating:Math.round(Y.getRating()),deviation:Math.round(Y.getRd()),time:Math.round(Date.now()/1e3)};let n=JSON.parse(localStorage.getItem("history"))||[];0===n.length||t.time-n[n.length-1].time>e?n.push(t):n[n.length-1]=t,localStorage.setItem("history",JSON.stringify(n)),oe()},ne=e=>{const t=new Date(1e3*e),n=t.getFullYear(),r=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0"),s=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0");return`${n}-${r}-${o} ${s}:${a}`},re=e=>{n.value.splice(e,1),localStorage.setItem("history",JSON.stringify(n.value.reverse()))},oe=()=>{let e=JSON.parse(localStorage.getItem("history"))||[];n.value=e.sort(((e,t)=>t.time-e.time))},se=()=>{r.value=!0,setTimeout((()=>{r.value=!1}),1e3)};return(e,u)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",c,[g,(0,o.Wm)((0,a.SU)(l.o),{class:"chessboard","board-config":s,onBoardCreated:Q,onMove:V}),(0,o._)("div",v,[(0,o._)("div",h,[d,(0,o._)("span",f,(0,i.zw)(t.value?.Rating),1)]),(0,o._)("svg",{class:"progress-ring",width:"60",height:"60"},[(0,o._)("circle",{class:"progress-ring__circle",stroke:"green","stroke-width":"4",fill:"transparent",r:I,cx:"30",cy:"30"})])]),(0,o._)("div",p,[(0,o._)("div",m,[y,(0,o._)("span",z,(0,i.zw)((0,a.SU)(A)),1),(0,o._)("span",b,"Â±"+(0,i.zw)((0,a.SU)(F)),1)]),n.value.length>0?((0,o.wg)(),(0,o.iD)("div",_,[k,(0,o._)("table",w,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.value,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:e.time},[(0,o._)("td",null,(0,i.zw)(ne(e.time)),1),(0,o._)("td",null,(0,i.zw)(e.rating),1),(0,o._)("td",null,"Â±"+(0,i.zw)(e.deviation),1),(0,o._)("td",null,[(0,o._)("button",{onClick:e=>re(t)},"âœ–",8,S)])])))),128))])])):(0,o.kq)("",!0)]),(0,o._)("div",x,[(0,o._)("div",{class:"explanation-block",onClick:u[0]||(u[0]=e=>C.value=!C.value)},[(0,o._)("h1",O,[(0,o.Uk)(" Goal of the Chess Puzzle Page "),C.value?((0,o.wg)(),(0,o.iD)("span",P,"â–¼")):((0,o.wg)(),(0,o.iD)("span",D,"â–²"))]),C.value?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",M,H))])]),r.value?((0,o.wg)(),(0,o.iD)("div",R,"âœ”")):(0,o.kq)("",!0)]),T],64))}};const N=$;var E=N,J={name:"App",components:{ChessPuzzle:E}},U=n(89);const q=(0,U.Z)(J,[["render",s]]);var A=q;(0,r.ri)(A).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,s){if(!r){var a=1/0;for(c=0;c<e.length;c++){r=e[c][0],o=e[c][1],s=e[c][2];for(var i=!0,l=0;l<r.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(i=!1,s<a&&(a=s));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,s,a=r[0],i=r[1],l=r[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var c=l(n)}for(t&&t(r);u<a.length;u++)s=a[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},r=self["webpackChunkbrain_chess_scorer"]=self["webpackChunkbrain_chess_scorer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(6668)}));r=n.O(r)})();
//# sourceMappingURL=app.7feea015.js.map