(function(){"use strict";var e={6178:function(e,t,n){var r=n(9242),o=n(3396);function s(e,t,n,r,s,a){const i=(0,o.up)("ChessPuzzle");return(0,o.wg)(),(0,o.j4)(i)}n(560);var a=n(4870),i=n(7139),l=n(6),u=n(1441);const c={class:"puzzle-container flex flex-col items-center"},g=(0,o._)("h1",{class:"text-3xl font-extrabold mb-2"},"Cognitive Score: Chess Metric",-1),v={class:"puzzle-top"},h={class:"puzzle-rating"},d=(0,o._)("span",{class:"puzzle-rating-label"},"Puzzle rating:",-1),f={class:"puzzle-rating-value"},p={class:"info_block my-10"},m={class:"user-rating"},y=(0,o._)("span",{class:"user-rating-label"},"My rating:",-1),z={class:"user-rating-value"},w={class:"user-rating-deviation"},b={key:0,class:"history m-b-5"},k=(0,o._)("h1",{class:"text-xl font-extrabold"},"History",-1),_={class:"history-table"},S=["onClick"],x={class:"explanation info_block my-10"},O={class:"text-xl font-extrabold mb-2"},P={key:0},D={key:1},C={key:0},M=(0,o.uE)('<p> The Chess Puzzle page is designed to measure and track cognitive sharpness and brain energy through the challenge of solving chess puzzles. It is a tool for users to assess their mental acuity at different times of the day. </p><h2 class="text-xl font-extrabold my-2">Rules and Features</h2><ul><li><strong>Chess Puzzle Solving:</strong> Solve chess puzzles within a set time limit to test your cognitive skills. </li><li><strong>Rating System:</strong> Each puzzle has a difficulty rating, and users have their own ratings that adjust based on performance. </li><li><strong>Timer:</strong> A countdown timer adds urgency to the puzzle-solving experience. </li><li><strong>User Performance Tracking:</strong> Track your rating changes and rating deviation to monitor your progress over time. </li><li><strong>History:</strong> A historical record of your ratings is maintained to help you see trends in your performance. </li><li><strong>Adaptive Difficulty:</strong> Puzzles are matched to your rating level to provide a consistent challenge. </li><li><strong>Local Storage:</strong> Your rating history is stored locally to maintain progress across sessions. </li><li><strong>Glicko-2 Rating System:</strong> The user&#39;s rating is updated using the Glicko-2 system, reflecting changes in skill level after each puzzle. </li></ul>',3),H=[M],R={key:0,class:"checkmark-emoji"},T="https://chess.pomodorr.io/get_puzzle",j=26;var I={__name:"ChessPuzzle",setup(e){const t=(0,a.iH)(null),n=(0,a.iH)([]),r=(0,a.iH)(!1),s={},M=(0,a.iH)(!0),I=(0,a.iH)(10);let $=null,N=!1,E=null,J=[],U="w",q=(0,a.iH)(null),A=(0,a.iH)(null),F=null,G=null;const Y=(e,t)=>{E.setPosition(e);const n=e.split(" ")[1];U="w"===n?"b":"w",J=t.split(" ");let r=E.board.state.orientation;r="white"===r?"w":"b",U!==r&&E.toggleOrientation()},L=async()=>{try{const e=await fetch(`${T}?rating=${q.value}`),n=await e.json();t.value=n,Y(n.FEN,n.Moves),setTimeout((()=>{null!==E&&E.move(J[0])}),300),W()}catch(e){console.error("Error fetching puzzle:",e)}},B=2*Math.PI*j,K=()=>{I.value=10,$=setInterval((()=>{if(I.value>0){I.value-=.1;const e=document.querySelector(".progress-ring__circle");if(e){const t=B-I.value/10*B;e.style.strokeDashoffset=t.toString(),e.style.strokeDasharray=B.toString()}}else clearInterval($),N&&V(!1),L()}),100)},W=()=>{clearInterval($),K()},Z=e=>{E=e,L()},Q=e=>{if(E.game.turn()===U)return;let t=E.game.history().length-1;if(e.lan===J[t]){if(console.log("correct move"),t+1>=J.length)return console.log("Success!"),oe(),V(!0),void L();setTimeout((()=>{E.move(J[t+1])}),300),W()}else console.log("wrong move"),setTimeout((()=>{E.undoLastMove()}),300),V(!1),L()},V=e=>{const n=F.makePlayer(t.value.Rating,t.value.RatingDeviation),r=e?1:0;F.updateRatings([[G,n,r]]),q.value=Math.round(G.getRating()),A.value=Math.round(G.getRd()),ee(),N=e};(0,o.bv)((()=>{re(),X(),L()}));const X=()=>{let e=.06;F=new u.Glicko2({tau:.5,rating:1500,rd:200,vol:e});const t=JSON.parse(localStorage.getItem("history"))||[];if(t.length>0){const e=t[t.length-1];q.value=e.rating,A.value=200}else q.value=500,A.value=1e3;G=F.makePlayer(q.value,A.value,e)},ee=()=>{const e=300,t={rating:Math.round(G.getRating()),deviation:Math.round(G.getRd()),time:Math.round(Date.now()/1e3)};let n=JSON.parse(localStorage.getItem("history"))||[];0===n.length||t.time-n[n.length-1].time>e?n.push(t):n[n.length-1]=t,localStorage.setItem("history",JSON.stringify(n)),re()},te=e=>{const t=new Date(1e3*e),n=t.getFullYear(),r=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0"),s=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0");return`${n}-${r}-${o} ${s}:${a}`},ne=e=>{n.value.splice(e,1),localStorage.setItem("history",JSON.stringify(n.value.reverse()))},re=()=>{let e=JSON.parse(localStorage.getItem("history"))||[];n.value=e.sort(((e,t)=>t.time-e.time))},oe=()=>{r.value=!0,setTimeout((()=>{r.value=!1}),1e3)};return(e,u)=>((0,o.wg)(),(0,o.iD)("div",c,[g,(0,o.Wm)((0,a.SU)(l.o),{class:"chessboard","board-config":s,onBoardCreated:Z,onMove:Q}),(0,o._)("div",v,[(0,o._)("div",h,[d,(0,o._)("span",f,(0,i.zw)(t.value?.Rating),1)]),(0,o._)("svg",{class:"progress-ring",width:"60",height:"60"},[(0,o._)("circle",{class:"progress-ring__circle",stroke:"green","stroke-width":"4",fill:"transparent",r:j,cx:"30",cy:"30"})])]),(0,o._)("div",p,[(0,o._)("div",m,[y,(0,o._)("span",z,(0,i.zw)((0,a.SU)(q)),1),(0,o._)("span",w,"±"+(0,i.zw)((0,a.SU)(A)),1)]),n.value.length>0?((0,o.wg)(),(0,o.iD)("div",b,[k,(0,o._)("table",_,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.value,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:e.time},[(0,o._)("td",null,(0,i.zw)(te(e.time)),1),(0,o._)("td",null,(0,i.zw)(e.rating),1),(0,o._)("td",null,"±"+(0,i.zw)(e.deviation),1),(0,o._)("td",null,[(0,o._)("button",{onClick:e=>ne(t)},"✖",8,S)])])))),128))])])):(0,o.kq)("",!0)]),(0,o._)("div",x,[(0,o._)("div",{class:"explanation-block",onClick:u[0]||(u[0]=e=>M.value=!M.value)},[(0,o._)("h1",O,[(0,o.Uk)(" Goal of the Chess Puzzle Page "),M.value?((0,o.wg)(),(0,o.iD)("span",P,"▼")):((0,o.wg)(),(0,o.iD)("span",D,"▲"))]),M.value?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",C,H))])]),r.value?((0,o.wg)(),(0,o.iD)("div",R,"✔")):(0,o.kq)("",!0)]))}};const $=I;var N=$,E={name:"App",components:{ChessPuzzle:N}},J=n(89);const U=(0,J.Z)(E,[["render",s]]);var q=U;(0,r.ri)(q).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,s){if(!r){var a=1/0;for(c=0;c<e.length;c++){r=e[c][0],o=e[c][1],s=e[c][2];for(var i=!0,l=0;l<r.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(i=!1,s<a&&(a=s));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,s,a=r[0],i=r[1],l=r[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var c=l(n)}for(t&&t(r);u<a.length;u++)s=a[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},r=self["webpackChunkbrain_chess_scorer"]=self["webpackChunkbrain_chess_scorer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(6178)}));r=n.O(r)})();
//# sourceMappingURL=app.2ecd61ec.js.map